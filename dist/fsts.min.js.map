{"version":3,"file":"fsts.min.js","sources":["../src/JS.js","../src/logger/ConsoleLogger.js","../src/Device.js","../src/Url.js"],"sourcesContent":["export default class JS {\n    // String\n    static padNumber(n, length) {\n        let cur = n % 10;\n        let remain = Math.floor(n / 10);\n        let s = '' + cur;\n        for (var i = 1; i < length; i++) {\n            if (remain === 0) {\n                s = '0' + s;\n            } else {\n                cur = remain % 10;\n                remain = Math.floor(remain / 10);\n                s = '' + cur + s;\n            }\n        }\n\n        return s;\n    }\n\n    // Object\n    static lessProps(props, less) {\n        const p = Object.assign({}, props);\n        if (!less) { return p; }\n\n        const list = [].concat(less);\n        list.forEach(prop => {\n            if (typeof prop === 'string') {\n                const regex = new RegExp('^' + prop + '$');\n                Object.keys(props).map(key => {\n                    if (key.match(regex)) { delete p[key]; }\n                })\n            }\n        });\n\n        return p;\n    }\n\n    static hasProps(props, lookup) {\n        if (!lookup) { return 0; }\n\n        let count = 0;\n        const list = [].concat(lookup);\n        list.forEach(prop => {\n            if (typeof prop === 'string') {\n                const regex = new RegExp('^' + prop + '$');\n                Object.keys(props).map(key => {\n                    if (key.match(regex)) { count++; }\n                })\n            }\n        });\n\n        return count;\n    }\n\n    static traverseProps(obj, callback) {\n        if (!callback) {\n            console.log('no callback for traverse, do nothing');\n            return;\n        }\n\n        JS._traverseProps([], obj, callback);\n    }\n\n    static _traverseProps(path, obj, callback) {\n        if (typeof obj !== 'object') { return; }\n\n        Object.keys(obj).forEach(key => {\n            const val = obj[key];\n            callback(path, key, val);\n            JS._traverseProps(path.concat(key), val, callback);\n        });\n    }\n\n    // Array\n    static isArray(val) {\n        if (typeof val !== 'object') { return false; }\n\n        return (typeof val.length === 'number');\n    }\n\n    static sureArray(ary) {\n        return [].concat(ary);\n    }\n\n    static appendUnique(ary, val) {\n        if (!ary) { return false; }\n\n        const exists = ary.filter(item => item === val);\n        if (exists.length > 0) { return false; }\n\n        ary.push(val);\n        return true;\n    }\n\n    // General\n    static undefinedThen(val, defVal) {\n        return (typeof val === 'undefined')? defVal : val;\n    }\n}\n","import JS from '../JS';\n\nconst LOG_LEVELS = {\n    VERBOSE: 1,\n    DEBUG: 2,\n    INFO: 3,\n    WARN: 4,\n    ERROR: 5\n};\n\nexport default class ConsoleLogger {\n    constructor(name, level = 'WARN') {\n        this.name = name;\n        this.level = level;\n    }\n\n    _ts() {\n        const dt = new Date();\n        return [\n            JS.padNumber(dt.getMinutes(), 2),\n            JS.padNumber(dt.getSeconds(), 2)\n        ].join(':') + '.' + dt.getMilliseconds();\n    }\n\n    _key(type, msg) {\n        let parts = [\n            '[' + type + ']',\n            this._ts(),\n            this.name,\n        ];\n\n        if (msg) { parts = parts.concat(['-', msg]); }\n\n        return parts.join(' ');\n    }\n\n    _log(type, ...msg) {\n        let level_name = this.level;\n        if (ConsoleLogger.LOG_LEVEL) { level_name = ConsoleLogger.LOG_LEVEL; }\n        if ((typeof window != 'undefined') && window.LOG_LEVEL) {\n            level_name = window.LOG_LEVEL;\n        }\n        const logger_level = LOG_LEVELS[level_name];\n        const type_level = LOG_LEVELS[type];\n        if (!(type_level >= logger_level)) {\n            return;\n        }\n\n        let log = console.log;\n        if (type === 'ERROR' && console.error) { log = console.error; }\n        if (type === 'WARN' && console.warn) { log = console.warn; }\n\n        if (msg.length === 1 && typeof msg[0] === 'string') {\n            log(this._key(type, msg[0]));\n        } else if (msg.length === 1) {\n            const output = {};\n            const key = this._key(type);\n            output[key] = msg[0];\n            log(output);\n        } else if (typeof msg[0] === 'string') {\n            let obj = msg.slice(1);\n            if (obj.length === 1) { obj = obj[0]; }\n            const output = {};\n            const key = this._key(type, msg[0]);\n            output[key] = obj;\n            log(output);\n        } else {\n            const output = {};\n            const key = this._key(type);\n            output[key] = msg;\n            log(output);\n        }\n    }\n\n    log(...msg) { this._log('INFO', ...msg); }\n    info(...msg) { this._log('INFO', ...msg); }\n    warn(...msg) { this._log('WARN', ...msg); }\n    error(...msg) { this._log('ERROR', ...msg); }\n    debug(...msg) { this._log('DEBUG', ...msg); }\n    verbose(...msg) { this._log('VERBOSE', ...msg); }\n};\n\n","export default class Device {\n    static hasWindow() {\n        return (typeof window !== 'undefined');\n    }\n}\n","export default class Url {\n    static params(url) {\n        let parts = url.split('?');\n        if (parts.length < 2) { return {}; }\n\n        parts = parts[1].split('#')[0].split('&');\n        let obj = {};\n        parts.forEach(part => {\n            const n_v = part.split('=');\n            const name = n_v[0];\n            const value = n_v.length > 1? n_v.slice(1).join('') : '';\n            obj[name] = decodeURIComponent(value);\n        });\n\n        return obj;\n    }\n}\n"],"names":["JS","n","length","cur","remain","Math","floor","s","i","props","less","p","Object","assign","concat","forEach","prop","regex","RegExp","keys","map","key","match","lookup","count","obj","callback","_traverseProps","log","path","val","ary","filter","item","push","defVal","LOG_LEVELS","ConsoleLogger","name","level","dt","Date","padNumber","getMinutes","getSeconds","join","getMilliseconds","type","msg","parts","this","_ts","level_name","LOG_LEVEL","window","logger_level","console","error","warn","_key","output","slice","_log","Device","Url","url","split","n_v","part","value","decodeURIComponent"],"mappings":"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"}