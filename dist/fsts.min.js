"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var JS=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"isString",value:function(e){return"string"==typeof e}},{key:"padNumber",value:function(t,n){if(t<0)return"-"+e.padNumber(-t,n-1);for(var r=t%10,o=Math.floor(t/10),i=""+r,a=1;a<n;a++)0===o?i="0"+i:(r=o%10,o=Math.floor(o/10),i=""+r+i);return i}},{key:"lessProps",value:function(e,t){var n=Object.assign({},e);if(!t)return n;return[].concat(t).forEach(function(t){if("string"==typeof t){var r=new RegExp("^"+t+"$");Object.keys(e).map(function(e){e.match(r)&&delete n[e]})}}),n}},{key:"hasProps",value:function(e,t){if(!t)return 0;var n=0;return[].concat(t).forEach(function(t){if("string"==typeof t){var r=new RegExp("^"+t+"$");Object.keys(e).map(function(e){e.match(r)&&n++})}}),n}},{key:"traverseProps",value:function(t,n){n?e._traverseProps([],t,n):console.log("no callback for traverse, do nothing")}},{key:"_traverseProps",value:function(t,n,r){"object"===(void 0===n?"undefined":babelHelpers.typeof(n))&&Object.keys(n).forEach(function(o){var i=n[o];r(t,o,i),e._traverseProps(t.concat(o),i,r)})}},{key:"isArray",value:function(e){return"object"===(void 0===e?"undefined":babelHelpers.typeof(e))&&"number"==typeof e.length}},{key:"sureArray",value:function(e){return[].concat(e)}},{key:"appendUnique",value:function(e,t){if(!e)return!1;return!(e.filter(function(e){return e===t}).length>0)&&(e.push(t),!0)}},{key:"ts",value:function(){return(new Date).getTime()}},{key:"isUndefined",value:function(e){return void 0===e}},{key:"undefinedThen",value:function(t,n){return e.isUndefined(t)?n:t}}]),e}(),LOG_LEVELS={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5},ConsoleLogger=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"WARN";babelHelpers.classCallCheck(this,e),this.name=t,this.level=n}return babelHelpers.createClass(e,[{key:"_ts",value:function(){var e=new Date;return[JS.padNumber(e.getMinutes(),2),JS.padNumber(e.getSeconds(),2)].join(":")+"."+e.getMilliseconds()}},{key:"_key",value:function(e,t){var n=["["+e+"]",this._ts(),this.name];return t&&(n=n.concat(["-",t])),n.join(" ")}},{key:"_log",value:function(t){var n=this.level;e.LOG_LEVEL&&(n=e.LOG_LEVEL),"undefined"!=typeof window&&window.LOG_LEVEL&&(n=window.LOG_LEVEL);var r=LOG_LEVELS[n];if(LOG_LEVELS[t]>=r){var o=console.log;"ERROR"===t&&console.error&&(o=console.error),"WARN"===t&&console.warn&&(o=console.warn);for(var i=arguments.length,a=Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];if(1===a.length&&"string"==typeof a[0])o(this._key(t,a[0]));else if(1===a.length){var l={};l[this._key(t)]=a[0],o(l)}else if("string"==typeof a[0]){var u=a.slice(1);1===u.length&&(u=u[0]);var c={};c[this._key(t,a[0])]=u,o(c)}else{var f={};f[this._key(t)]=a,o(f)}}}},{key:"log",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log.apply(this,["INFO"].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log.apply(this,["INFO"].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log.apply(this,["WARN"].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log.apply(this,["ERROR"].concat(t))}},{key:"debug",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log.apply(this,["DEBUG"].concat(t))}},{key:"verbose",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log.apply(this,["VERBOSE"].concat(t))}}]),e}(),Device=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"hasWindow",value:function(){return"undefined"!=typeof window}}]),e}(),logger=new ConsoleLogger("LocalStorage"),defaultOptions={prefix:"_fsts_",expiration:"3600"},LocalStorage=function(){function e(t){babelHelpers.classCallCheck(this,e),logger.debug("creating LocalStorage instance",t),this._options=Object.assign({},defaultOptions,t)}return babelHelpers.createClass(e,[{key:"options",value:function(e){return e&&(this._options=Object.assign({},this._options,e)),this._options}},{key:"key",value:function(e){return this._options.prefix+e}},{key:"set",value:function(e,t){if(e)if(JS.isUndefined(t)||null===t)logger.worn("nothing to set for "+e);else{var n={data:JSON.stringify(t),ts:JS.ts()};this._setItem(e,n)}else logger.warn("no key to set")}},{key:"get",value:function(e){if(e){var t=this._getItem(e);return t?this._isExpired(t)?(logger.verbose("cache miss: "+e),null):(logger.verbose("cache hit: "+e),JSON.parse(t.data)):(logger.verbose("cache miss: "+e),null)}logger.warn("no key to get")}},{key:"remove",value:function(e){e?this._removeItem(e):logger.warn("no key to remove")}},{key:"clear",value:function(){for(var e=window.localStorage;e.length>0;){var t=e.key(0);e.removeItem(t)}}},{key:"purgeExpired",value:function(){for(var e=window.localStorage;e.length>0;){var t=e.key(0),n=JSON.parse(e.getItem(t));this._isExpired(n)&&e.removeItem(t)}}},{key:"_setItem",value:function(e,t){window.localStorage.setItem(this.key(e),JSON.stringify(t))}},{key:"_getItem",value:function(e){var t=window.localStorage.getItem(this.key(e));if(!t)return null;var n=JSON.parse(t);return{data:n.data,ts:1*n.ts}}},{key:"_removeItem",value:function(e){window.localStorge.removeItem(this.key(e))}},{key:"_isExpired",value:function(e){var t=JS.ts();return e.ts+1e3*this._options.expiration<t}}]),e}(),logger$1=new ConsoleLogger("MemoryStorage"),defaultOptions$1={expiration:"3600"},MemoryStorage=function(){function e(t){babelHelpers.classCallCheck(this,e),logger$1.debug("creating MemoryStorage instance",t),this._options=Object.assign({},defaultOptions$1,t),this._store={}}return babelHelpers.createClass(e,[{key:"options",value:function(e){return e&&(this._options=Object.assign({},this._options,e)),this._options}},{key:"set",value:function(e,t){if(e)if(JS.isUndefined(t)||null===t)logger$1.worn("nothing to set for "+e);else{var n={data:JSON.stringify(t),ts:JS.ts()};this._store[e]=n}else logger$1.warn("no key to set")}},{key:"get",value:function(e){if(e){var t=this._store[e];return t?this._isExpired(t)?(logger$1.verbose("cache miss: "+e),null):(logger$1.verbose("cache hit: "+e),JSON.parse(t.data)):(logger$1.verbose("cache miss: "+e),null)}logger$1.warn("no key to get")}},{key:"remove",value:function(e){e?delete this._store[e]:logger$1.warn("no key to remove")}},{key:"clear",value:function(){this._store={}}},{key:"purgeExpired",value:function(){var e=this;Object.keys(this._store).forEach(function(t){var n=e._store[t];e._isExpired(n)&&delete e._store[t]})}},{key:"_isExpired",value:function(e){var t=JS.ts();return e.ts+1e3*this._options.expiration<t}}]),e}(),_instance=Device.hasWindow()?new LocalStorage:new MemoryStorage,Url=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"params",value:function(e){var t=e.split("?");if(t.length<2)return{};var n={};return(t=t[1].split("#")[0].split("&")).forEach(function(e){var t=e.split("="),r=t[0],o=t.length>1?t.slice(1).join(""):"";n[r]=decodeURIComponent(o)}),n}}]),e}();exports.Logger=ConsoleLogger,exports.Cache=_instance,exports.Device=Device,exports.JS=JS,exports.Url=Url;
//# sourceMappingURL=fsts.min.js.map
