{"version":3,"file":"fsts.js","sources":["../lib/JS.js","../lib/logger/ConsoleLogger.js","../lib/logger/index.js","../lib/Device.js","../lib/cache/LocalStorage.js","../lib/cache/MemoryStorage.js","../lib/cache/index.js","../lib/sso/Google.js","../lib/sso/Facebook.js","../lib/sso/LinkedIn.js","../lib/sso/index.js","../lib/pipe/Subscriber.js","../lib/pipe/Channel.js","../lib/pipe/Pipe.js","../lib/pipe/index.js","../lib/Url.js"],"sourcesContent":["var JS = function () {\n    function JS() {\n        babelHelpers.classCallCheck(this, JS);\n    }\n\n    babelHelpers.createClass(JS, null, [{\n        key: 'isString',\n\n        // String\n        value: function isString(val) {\n            return typeof val === 'string';\n        }\n    }, {\n        key: 'padNumber',\n        value: function padNumber(n, length) {\n            if (n < 0) {\n                return '-' + JS.padNumber(-n, length - 1);\n            }\n\n            var cur = n % 10;\n            var remain = Math.floor(n / 10);\n            var s = '' + cur;\n            for (var i = 1; i < length; i++) {\n                if (remain === 0) {\n                    s = '0' + s;\n                } else {\n                    cur = remain % 10;\n                    remain = Math.floor(remain / 10);\n                    s = '' + cur + s;\n                }\n            }\n\n            return s;\n        }\n\n        // Object\n\n    }, {\n        key: 'lessProps',\n        value: function lessProps(props, less) {\n            var p = Object.assign({}, props);\n            if (!less) {\n                return p;\n            }\n\n            var list = [].concat(less);\n            list.forEach(function (prop) {\n                if (typeof prop === 'string') {\n                    var regex = new RegExp('^' + prop + '$');\n                    Object.keys(props).map(function (key) {\n                        if (key.match(regex)) {\n                            delete p[key];\n                        }\n                    });\n                }\n            });\n\n            return p;\n        }\n    }, {\n        key: 'hasProps',\n        value: function hasProps(props, lookup) {\n            if (!lookup) {\n                return 0;\n            }\n\n            var count = 0;\n            var list = [].concat(lookup);\n            list.forEach(function (prop) {\n                if (typeof prop === 'string') {\n                    var regex = new RegExp('^' + prop + '$');\n                    Object.keys(props).map(function (key) {\n                        if (key.match(regex)) {\n                            count++;\n                        }\n                    });\n                }\n            });\n\n            return count;\n        }\n    }, {\n        key: 'traverseProps',\n        value: function traverseProps(obj, callback) {\n            if (!callback) {\n                console.log('no callback for traverse, do nothing');\n                return;\n            }\n\n            JS._traverseProps([], obj, callback);\n        }\n    }, {\n        key: '_traverseProps',\n        value: function _traverseProps(path, obj, callback) {\n            if ((typeof obj === 'undefined' ? 'undefined' : babelHelpers.typeof(obj)) !== 'object') {\n                return;\n            }\n\n            Object.keys(obj).forEach(function (key) {\n                var val = obj[key];\n                callback(path, key, val);\n                JS._traverseProps(path.concat(key), val, callback);\n            });\n        }\n\n        // Array\n\n    }, {\n        key: 'isArray',\n        value: function isArray(val) {\n            if ((typeof val === 'undefined' ? 'undefined' : babelHelpers.typeof(val)) !== 'object') {\n                return false;\n            }\n\n            return typeof val.length === 'number';\n        }\n    }, {\n        key: 'sureArray',\n        value: function sureArray(ary) {\n            return [].concat(ary);\n        }\n    }, {\n        key: 'appendUnique',\n        value: function appendUnique(ary, val) {\n            if (!ary) {\n                return false;\n            }\n\n            var exists = ary.filter(function (item) {\n                return item === val;\n            });\n            if (exists.length > 0) {\n                return false;\n            }\n\n            ary.push(val);\n            return true;\n        }\n\n        // Date Time\n\n    }, {\n        key: 'ts',\n        value: function ts() {\n            return new Date().getTime();\n        }\n\n        // General\n\n    }, {\n        key: 'isUndefined',\n        value: function isUndefined(val) {\n            return typeof val === 'undefined';\n        }\n    }, {\n        key: 'undefinedThen',\n        value: function undefinedThen(val, defVal) {\n            return JS.isUndefined(val) ? defVal : val;\n        }\n    }]);\n    return JS;\n}();\n\nexport default JS;","import JS from '../JS';\n\nvar LOG_LEVELS = {\n    VERBOSE: 1,\n    DEBUG: 2,\n    INFO: 3,\n    WARN: 4,\n    ERROR: 5\n};\n\nvar ConsoleLogger = function () {\n    function ConsoleLogger(name) {\n        var level = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'WARN';\n        babelHelpers.classCallCheck(this, ConsoleLogger);\n\n        this.name = name;\n        this.level = level;\n    }\n\n    babelHelpers.createClass(ConsoleLogger, [{\n        key: '_ts',\n        value: function _ts() {\n            var dt = new Date();\n            return [JS.padNumber(dt.getMinutes(), 2), JS.padNumber(dt.getSeconds(), 2)].join(':') + '.' + dt.getMilliseconds();\n        }\n    }, {\n        key: '_key',\n        value: function _key(type, msg) {\n            var parts = ['[' + type + ']', this._ts(), this.name];\n\n            if (msg) {\n                parts = parts.concat(['-', msg]);\n            }\n\n            return parts.join(' ');\n        }\n    }, {\n        key: '_log',\n        value: function _log(type) {\n            var level_name = this.level;\n            if (ConsoleLogger.LOG_LEVEL) {\n                level_name = ConsoleLogger.LOG_LEVEL;\n            }\n            if (typeof window != 'undefined' && window.LOG_LEVEL) {\n                level_name = window.LOG_LEVEL;\n            }\n            var logger_level = LOG_LEVELS[level_name];\n            var type_level = LOG_LEVELS[type];\n            if (!(type_level >= logger_level)) {\n                return;\n            }\n\n            var log = console.log;\n            if (type === 'ERROR' && console.error) {\n                log = console.error;\n            }\n            if (type === 'WARN' && console.warn) {\n                log = console.warn;\n            }\n\n            for (var _len = arguments.length, msg = Array(_len > 1 ? _len - 1 : 0), _key2 = 1; _key2 < _len; _key2++) {\n                msg[_key2 - 1] = arguments[_key2];\n            }\n\n            if (msg.length === 1 && typeof msg[0] === 'string') {\n                log(this._key(type, msg[0]));\n            } else if (msg.length === 1) {\n                var output = {};\n                var key = this._key(type);\n                output[key] = msg[0];\n                log(output);\n            } else if (typeof msg[0] === 'string') {\n                var obj = msg.slice(1);\n                if (obj.length === 1) {\n                    obj = obj[0];\n                }\n                var _output = {};\n                var _key3 = this._key(type, msg[0]);\n                _output[_key3] = obj;\n                log(_output);\n            } else {\n                var _output2 = {};\n                var _key4 = this._key(type);\n                _output2[_key4] = msg;\n                log(_output2);\n            }\n        }\n    }, {\n        key: 'log',\n        value: function log() {\n            for (var _len2 = arguments.length, msg = Array(_len2), _key5 = 0; _key5 < _len2; _key5++) {\n                msg[_key5] = arguments[_key5];\n            }\n\n            this._log.apply(this, ['INFO'].concat(msg));\n        }\n    }, {\n        key: 'info',\n        value: function info() {\n            for (var _len3 = arguments.length, msg = Array(_len3), _key6 = 0; _key6 < _len3; _key6++) {\n                msg[_key6] = arguments[_key6];\n            }\n\n            this._log.apply(this, ['INFO'].concat(msg));\n        }\n    }, {\n        key: 'warn',\n        value: function warn() {\n            for (var _len4 = arguments.length, msg = Array(_len4), _key7 = 0; _key7 < _len4; _key7++) {\n                msg[_key7] = arguments[_key7];\n            }\n\n            this._log.apply(this, ['WARN'].concat(msg));\n        }\n    }, {\n        key: 'error',\n        value: function error() {\n            for (var _len5 = arguments.length, msg = Array(_len5), _key8 = 0; _key8 < _len5; _key8++) {\n                msg[_key8] = arguments[_key8];\n            }\n\n            this._log.apply(this, ['ERROR'].concat(msg));\n        }\n    }, {\n        key: 'debug',\n        value: function debug() {\n            for (var _len6 = arguments.length, msg = Array(_len6), _key9 = 0; _key9 < _len6; _key9++) {\n                msg[_key9] = arguments[_key9];\n            }\n\n            this._log.apply(this, ['DEBUG'].concat(msg));\n        }\n    }, {\n        key: 'verbose',\n        value: function verbose() {\n            for (var _len7 = arguments.length, msg = Array(_len7), _key10 = 0; _key10 < _len7; _key10++) {\n                msg[_key10] = arguments[_key10];\n            }\n\n            this._log.apply(this, ['VERBOSE'].concat(msg));\n        }\n    }]);\n    return ConsoleLogger;\n}();\n\nexport default ConsoleLogger;\n;","import ConsoleLogger from './ConsoleLogger';\n\nvar Logger = ConsoleLogger;\n\nexport default Logger;","var Device = function () {\n    function Device() {\n        babelHelpers.classCallCheck(this, Device);\n    }\n\n    babelHelpers.createClass(Device, null, [{\n        key: 'hasWindow',\n        value: function hasWindow() {\n            return typeof window !== 'undefined';\n        }\n    }, {\n        key: 'createScript',\n        value: function createScript(src, async, onload) {\n            var script = document.createElement('script');\n            script.src = src;\n            script.async = true;\n            script.onload = onload;\n            document.body.appendChild(script);\n        }\n    }]);\n    return Device;\n}();\n\nexport default Device;","import JS from '../JS';\nimport Logger from '../logger';\n\nvar logger = new Logger('LocalStorage');\n\nvar defaultOptions = {\n    prefix: '_fsts_',\n    expiration: '3600' // seconds\n};\n\nvar LocalStorage = function () {\n    function LocalStorage(options) {\n        babelHelpers.classCallCheck(this, LocalStorage);\n\n        logger.debug('creating LocalStorage instance', options);\n\n        this._options = Object.assign({}, defaultOptions, options);\n    }\n\n    babelHelpers.createClass(LocalStorage, [{\n        key: 'options',\n        value: function options(_options) {\n            if (_options) {\n                this._options = Object.assign({}, this._options, _options);\n            }\n\n            return this._options;\n        }\n    }, {\n        key: 'key',\n        value: function key(_key) {\n            return this._options.prefix + _key;\n        }\n    }, {\n        key: 'set',\n        value: function set(key, value) {\n            if (!key) {\n                logger.warn('no key to set');\n                return;\n            }\n            if (JS.isUndefined(value) || value === null) {\n                logger.worn('nothing to set for ' + key);\n                return;\n            }\n\n            var item = {\n                data: JSON.stringify(value),\n                ts: JS.ts()\n            };\n\n            this._setItem(key, item);\n        }\n    }, {\n        key: 'get',\n        value: function get(key) {\n            if (!key) {\n                logger.warn('no key to get');\n                return;\n            }\n\n            var item = this._getItem(key);\n            if (!item) {\n                logger.verbose('cache miss: ' + key);\n                return null;\n            }\n\n            if (this._isExpired(item)) {\n                logger.verbose('cache miss: ' + key);\n                return null;\n            }\n\n            logger.verbose('cache hit: ' + key);\n            return JSON.parse(item.data);\n        }\n    }, {\n        key: 'remove',\n        value: function remove(key) {\n            if (!key) {\n                logger.warn('no key to remove');\n                return;\n            }\n\n            this._removeItem(key);\n        }\n    }, {\n        key: 'clear',\n        value: function clear() {\n            var store = window.localStorage;\n            while (store.length > 0) {\n                var key = store.key(0);\n                store.removeItem(key);\n            }\n        }\n    }, {\n        key: 'purgeExpired',\n        value: function purgeExpired() {\n            var store = window.localStorage;\n            while (store.length > 0) {\n                var key = store.key(0);\n                var item = JSON.parse(store.getItem(key));\n                if (this._isExpired(item)) {\n                    store.removeItem(key);\n                }\n            }\n        }\n    }, {\n        key: '_setItem',\n        value: function _setItem(key, item) {\n            window.localStorage.setItem(this.key(key), JSON.stringify(item));\n        }\n    }, {\n        key: '_getItem',\n        value: function _getItem(key) {\n            var item = window.localStorage.getItem(this.key(key));\n            if (!item) {\n                return null;\n            }\n\n            var it = JSON.parse(item);\n            return {\n                data: it.data,\n                ts: it.ts * 1\n            };\n        }\n    }, {\n        key: '_removeItem',\n        value: function _removeItem(key) {\n            window.localStorge.removeItem(this.key(key));\n        }\n    }, {\n        key: '_isExpired',\n        value: function _isExpired(item) {\n            var cur = JS.ts();\n            return item.ts + this._options.expiration * 1000 < cur;\n        }\n    }]);\n    return LocalStorage;\n}();\n\nexport default LocalStorage;","import JS from '../JS';\nimport Logger from '../logger';\n\nvar logger = new Logger('MemoryStorage');\n\nvar defaultOptions = {\n    expiration: '3600' // seconds\n\n\n    /**\n    * MemoryStorage as an alternative to LocalStorage. Items will not live beyond session.\n    * Still do JSON stringify so consistant with LocalStorage, also ensures immutable in cache.\n    */\n};\nvar MemoryStorage = function () {\n    function MemoryStorage(options) {\n        babelHelpers.classCallCheck(this, MemoryStorage);\n\n        logger.debug('creating MemoryStorage instance', options);\n\n        this._options = Object.assign({}, defaultOptions, options);\n\n        this._store = {};\n    }\n\n    babelHelpers.createClass(MemoryStorage, [{\n        key: 'options',\n        value: function options(_options) {\n            if (_options) {\n                this._options = Object.assign({}, this._options, _options);\n            }\n\n            return this._options;\n        }\n    }, {\n        key: 'set',\n        value: function set(key, value) {\n            if (!key) {\n                logger.warn('no key to set');\n                return;\n            }\n            if (JS.isUndefined(value) || value === null) {\n                logger.worn('nothing to set for ' + key);\n                return;\n            }\n\n            var item = {\n                data: JSON.stringify(value),\n                ts: JS.ts()\n            };\n\n            this._store[key] = item;\n        }\n    }, {\n        key: 'get',\n        value: function get(key) {\n            if (!key) {\n                logger.warn('no key to get');\n                return;\n            }\n\n            var item = this._store[key];\n            if (!item) {\n                logger.verbose('cache miss: ' + key);\n                return null;\n            }\n\n            if (this._isExpired(item)) {\n                logger.verbose('cache miss: ' + key);\n                return null;\n            }\n\n            logger.verbose('cache hit: ' + key);\n            return JSON.parse(item.data);\n        }\n    }, {\n        key: 'remove',\n        value: function remove(key) {\n            if (!key) {\n                logger.warn('no key to remove');\n                return;\n            }\n\n            delete this._store[key];\n        }\n    }, {\n        key: 'clear',\n        value: function clear() {\n            this._store = {};\n        }\n    }, {\n        key: 'purgeExpired',\n        value: function purgeExpired() {\n            var _this = this;\n\n            Object.keys(this._store).forEach(function (key) {\n                var item = _this._store[key];\n                if (_this._isExpired(item)) {\n                    delete _this._store[key];\n                }\n            });\n        }\n    }, {\n        key: '_isExpired',\n        value: function _isExpired(item) {\n            var cur = JS.ts();\n            return item.ts + this._options.expiration * 1000 < cur;\n        }\n    }]);\n    return MemoryStorage;\n}();\n\nexport default MemoryStorage;","import Device from '../Device';\n\nimport { default as LocalStorage } from './LocalStorage';\nimport { default as MemoryStorage } from './MemoryStorage';\n\nvar _instance = Device.hasWindow() ? new LocalStorage() : new MemoryStorage();\n\nexport default _instance;\n\nexport { LocalStorage, MemoryStorage };","import Device from '../Device';\nimport Logger from '../logger';\n\nvar logger = new Logger('SSO.Google');\n\nvar default_options = {\n    google_client_id: null,\n    script: 'https://apis.google.com/js/platform.js',\n    scope: 'profile email openid'\n\n    /**\n    * Reference: https://developers.google.com/identity/sign-in/web/reference\n    */\n};\nvar Google = function () {\n    function Google(options) {\n        babelHelpers.classCallCheck(this, Google);\n\n        if (typeof options === 'string') {\n            options = { google_client_id: options };\n        }\n        this._options = Object.assign({}, default_options, options);\n        if (!this._options.google_client_id) {\n            logger.warn('missing google_client_id');\n        }\n\n        this.signIn = this.signIn.bind(this);\n        this.signOut = this.signOut.bind(this);\n        this.check = this.check.bind(this);\n        this.ready = this.ready.bind(this);\n\n        this._initGapi = this._initGapi.bind(this);\n        this._user = this._user.bind(this);\n\n        this._ga = null;\n\n        this._createScript();\n    }\n\n    babelHelpers.createClass(Google, [{\n        key: 'signIn',\n        value: function signIn() {\n            var _this = this;\n\n            if (!this._ga) {\n                return Promise.reject('no ga instance');\n            }\n\n            return this._ga.signIn().then(function (googleUser) {\n                return _this._user(googleUser);\n            });\n        }\n    }, {\n        key: 'signOut',\n        value: function signOut() {\n            if (!this._ga) {\n                return Promise.reject('no ga instance');\n            }\n\n            return this._ga.signOut();\n        }\n    }, {\n        key: 'check',\n        value: function check() {\n            var _this2 = this;\n\n            if (!this._ga) {\n                return Promise.reject('no ga instance');\n            }\n\n            return new Promise(function (resolve, reject) {\n                var googleUser = _this2._ga.currentUser.get();\n                if (!googleUser) {\n                    reject('no google user');\n                    return;\n                }\n                if (googleUser.isSignedIn()) {\n                    resolve(_this2._user(googleUser));\n                } else {\n                    reject('not signed in');\n                }\n            });\n        }\n    }, {\n        key: 'ready',\n        value: function ready() {\n            var google_client_id = this._options.google_client_id;\n\n            if (!google_client_id) {\n                return Promise.reject('missing google_client_id in options');\n            }\n\n            var that = this;\n            return new Promise(function (resolve, reject) {\n                var checkCount = 0;\n                var checkGA = function checkGA() {\n                    checkCount++;\n                    if (that._ga) {\n                        resolve();\n                        return;\n                    }\n\n                    if (window.gapi) {\n                        that._initGapi();\n                        return;\n                    }\n\n                    if (checkCount < 5) {\n                        window.setTimeout(checkGA, 500);\n                    } else {\n                        reject('timeout');\n                    }\n                };\n                checkGA();\n            });\n        }\n    }, {\n        key: '_user',\n        value: function _user(googleUser) {\n            var _googleUser$getAuthRe = googleUser.getAuthResponse(),\n                id_token = _googleUser$getAuthRe.id_token;\n\n            var profile = googleUser.getBasicProfile();\n            return {\n                id_token: id_token,\n                email: profile.getEmail(),\n                name: profile.getName()\n            };\n        }\n    }, {\n        key: '_createScript',\n        value: function _createScript() {\n            if (window.gapi) {\n                this._initGapi();\n                return;\n            }\n\n            var script = this._options.script;\n\n            if (script === 'none') {\n                return;\n            }\n\n            var src = this._options.script;\n            Device.createScript(src, true, this._initGapi);\n        }\n    }, {\n        key: '_initGapi',\n        value: function _initGapi() {\n            logger.debug('init gapi');\n            var _options = this._options,\n                google_client_id = _options.google_client_id,\n                scope = _options.scope;\n\n            if (!google_client_id) {\n                logger.warn('missing google_client_id in options');\n                return;\n            }\n\n            var that = this;\n            var g = window.gapi;\n            g.load('auth2', function () {\n                g.auth2.init({\n                    client_id: google_client_id,\n                    scope: scope\n                }).then(function (ga) {\n                    that._ga = ga;\n                });\n            });\n        }\n    }]);\n    return Google;\n}();\n\nexport default Google;","import Device from '../Device';\nimport Logger from '../logger';\n\nvar logger = new Logger('SSO.Facebook');\n\nvar default_options = {\n    facebook_app_id: null,\n    script: 'https://connect.facebook.net/en_US/sdk.js',\n    scope: 'public_profile,email'\n\n    /**\n    * Reference: https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus\n    */\n};\nvar Facebook = function () {\n    function Facebook(options) {\n        babelHelpers.classCallCheck(this, Facebook);\n\n        if (typeof options === 'string') {\n            options = { facebook_app_id: options };\n        }\n        this._options = Object.assign({}, default_options, options);\n        if (!this._options.facebook_app_id) {\n            logger.warn('missing facebook_app_id');\n        }\n\n        this.signIn = this.signIn.bind(this);\n        this.signOut = this.signOut.bind(this);\n        this.check = this.check.bind(this);\n        this.ready = this.ready.bind(this);\n\n        this._fbAsyncInit = this._fbAsyncInit.bind(this);\n        this._user = this._user.bind(this);\n\n        this._fb = null;\n\n        this._createScript();\n    }\n\n    babelHelpers.createClass(Facebook, [{\n        key: 'signIn',\n        value: function signIn() {\n            var _this = this;\n\n            var fb = this._fb;\n            if (!fb) {\n                return Promise.reject('no fb instance');\n            }\n\n            var scope = this._options.scope;\n\n            return this.check().then(function (authResponse) {\n                return _this._user(authResponse);\n            }).catch(function (err) {\n                return new Promise(function (resolve, reject) {\n                    fb.login(function (response) {\n                        resolve(_this._user(response.authResponse));\n                    }, { scope: scope });\n                });\n            });\n        }\n    }, {\n        key: 'signOut',\n        value: function signOut() {\n            var fb = this._fb;\n            if (!fb) {\n                return Promise.reject('no fb instance');\n            }\n\n            return new Promise(function (resolve, reject) {\n                fb.logout(function (response) {\n                    logger.debug('signed out', response);\n                    resolve();\n                });\n            });\n        }\n    }, {\n        key: 'check',\n        value: function check() {\n            var fb = this._fb;\n            if (!fb) {\n                return Promise.reject('no fb instance');\n            }\n\n            return new Promise(function (resolve, reject) {\n                fb.getLoginStatus(function (response) {\n                    if (response.status === 'connected') {\n                        resolve(response.authResponse);\n                    } else {\n                        reject(response);\n                    }\n                });\n            });\n        }\n    }, {\n        key: 'ready',\n        value: function ready() {\n            var facebook_app_id = this._options.facebook_app_id;\n\n            if (!facebook_app_id) {\n                return Promise.reject('missing facebook_app_id in props');\n            }\n\n            var that = this;\n            return new Promise(function (resolve, reject) {\n                var checkCount = 0;\n                var checkFB = function checkFB() {\n                    checkCount++;\n                    if (that._fb) {\n                        resolve();\n                        return;\n                    }\n\n                    if (window.FB) {\n                        that._fb = window.FB;\n                        resolve();\n                        return;\n                    }\n\n                    if (checkCount < 5) {\n                        window.setTimeout(checkFB, 500);\n                    } else {\n                        reject('timeout');\n                    }\n                };\n                checkFB();\n            });\n        }\n    }, {\n        key: '_user',\n        value: function _user(authResponse) {\n            if (!authResponse) {\n                return Promise.reject('no authResponse');\n            }\n            var accessToken = authResponse.accessToken,\n                userID = authResponse.userID;\n\n            if (!accessToken) {\n                return Promise.reject('no accessToken');\n            }\n\n            var fb = this._fb;\n            return new Promise(function (resolve, reject) {\n                fb.api('/me', function (response) {\n                    var user = {\n                        accessToken: accessToken,\n                        userID: userID,\n                        name: response.name\n                    };\n\n                    logger.debug('user', user);\n                    resolve(user);\n                });\n            });\n        }\n    }, {\n        key: '_fbAsyncInit',\n        value: function _fbAsyncInit() {\n            logger.debug('init FB');\n\n            var facebook_app_id = this._options.facebook_app_id;\n\n            if (!facebook_app_id) {\n                logger.warn('missing facebook_app_id in props');\n                return;\n            }\n\n            var fb = window.FB;\n            fb.init({\n                appId: facebook_app_id,\n                cookie: true,\n                xfbml: true,\n                version: 'v2.11'\n            });\n            this._fb = fb;\n        }\n    }, {\n        key: '_createScript',\n        value: function _createScript() {\n            if (window.FB) {\n                this._fbAsyncInit();\n                return;\n            }\n\n            var script = this._options.script;\n\n            if (script === 'none') {\n                if (window.FB) {\n                    this._fb = window.FB;\n                }\n                return;\n            }\n\n            window.fbAsyncInit = this._fbAsyncInit;\n            Device.createScript(this._options.script, true);\n        }\n    }]);\n    return Facebook;\n}();\n\nexport default Facebook;","import Device from '../Device';\nimport Logger from '../logger';\n\nvar logger = new Logger('SSO.LinkedIn');\n\nvar default_options = {\n    api_key: null,\n    script: 'http://platform.linkedin.com/in.js?async=true'\n\n    /**\n    * Reference: https://developer.linkedin.com/docs/getting-started-js-sdk\n    */\n};\nvar LinkedIn = function () {\n    function LinkedIn(options) {\n        babelHelpers.classCallCheck(this, LinkedIn);\n\n        if (typeof options === 'string') {\n            options = { api_key: options };\n        }\n        this._options = Object.assign({}, default_options, options);\n        if (!this._options.api_key) {\n            logger.warn('missing api_key');\n        }\n\n        this.signIn = this.signIn.bind(this);\n        this.signOut = this.signOut.bind(this);\n        this.check = this.check.bind(this);\n        this.ready = this.ready.bind(this);\n\n        this._user = this._user.bind(this);\n        this._initIn = this._initIn.bind(this);\n        this._fullyLoaded = this._fullyLoaded.bind(this);\n\n        this._IN = null;\n        this._INLoaded = false;\n\n        this._createScript();\n    }\n\n    babelHelpers.createClass(LinkedIn, [{\n        key: 'signIn',\n        value: function signIn() {\n            var IN = this._IN;\n            if (!IN) {\n                return Promise.reject('no IN instance');\n            }\n\n            var that = this;\n            return new Promise(function (resolve, reject) {\n                IN.User.authorize(function () {\n                    that._user().then(function (user) {\n                        return resolve(user);\n                    }).catch(function (err) {\n                        return reject(err);\n                    });\n                });\n            });\n        }\n    }, {\n        key: 'signOut',\n        value: function signOut() {\n            var IN = this._IN;\n            if (!IN) {\n                return Promise.reject('no IN instance');\n            }\n\n            var that = this;\n            return new Promise(function (resolve, reject) {\n                IN.User.logout(function () {\n                    logger.debug('signed out');\n                    resolve();\n                });\n            });\n        }\n    }, {\n        key: 'check',\n        value: function check() {\n            var IN = this._IN;\n            if (!IN) {\n                return Promise.reject('no IN instance');\n            }\n\n            if (!IN.User.isAuthorized()) {\n                return Promise.reject('not authorized');\n            }\n\n            return this._user();\n        }\n    }, {\n        key: 'ready',\n        value: function ready() {\n            var api_key = this._options.api_key;\n\n            if (!api_key) {\n                return Promise.reject('missing api_key');\n            }\n\n            var that = this;\n            return new Promise(function (resolve, reject) {\n                var checkCount = 0;\n                var checkIN = function checkIN() {\n                    checkCount++;\n                    if (that._IN && that._INLoaded) {\n                        resolve();\n                        return;\n                    }\n\n                    if (window.IN) {\n                        that._initIn();\n                        return;\n                    }\n\n                    if (checkCount < 5) {\n                        window.setTimeout(checkIN, 500);\n                    } else {\n                        reject('timeout');\n                    }\n                };\n                checkIN();\n            });\n        }\n    }, {\n        key: '_user',\n        value: function _user() {\n            var IN = this._IN;\n            return new Promise(function (resolve, reject) {\n                IN.API.Raw('/people/~').result(function (profile) {\n                    var firstName = profile.firstName,\n                        lastName = profile.lastName,\n                        id = profile.id,\n                        headline = profile.headline;\n\n                    resolve({\n                        id: id,\n                        firstName: firstName,\n                        lastName: lastName,\n                        headline: headline\n                    });\n                }).error(function (err) {\n                    return reject(err);\n                });\n            });\n        }\n    }, {\n        key: '_createScript',\n        value: function _createScript() {\n            if (window.IN) {\n                this._initIn();\n            }\n\n            var script = this._options.script;\n\n            if (script === 'none') {\n                return;\n            }\n\n            window._in_onload = this._fullyLoaded;\n            Device.createScript(this._options.script, true, this._initIn);\n        }\n    }, {\n        key: '_initIn',\n        value: function _initIn() {\n            logger.debug('init IN');\n            var api_key = this._options.api_key;\n\n            if (!api_key) {\n                logger.warn('missing api_key');\n                return;\n            }\n\n            var IN = window.IN;\n            IN.init({\n                api_key: api_key,\n                authorize: true,\n                onLoad: \"_in_onload\"\n            });\n            this._IN = IN;\n        }\n    }, {\n        key: '_fullyLoaded',\n        value: function _fullyLoaded() {\n            logger.debug('fully loaded');\n            this._INLoaded = true;\n        }\n    }]);\n    return LinkedIn;\n}();\n\nexport default LinkedIn;","import Google from './Google';\nimport Facebook from './Facebook';\nimport LinkedIn from './LinkedIn';\n\nvar SSO = {\n    Google: Google,\n    Facebook: Facebook,\n    LinkedIn: LinkedIn\n};\n\nexport default SSO;","import Logger from '../logger';\n\nvar logger = new Logger('Subscriber');\n\nvar Subscriber = function () {\n    function Subscriber(channel, noticeHandler) {\n        babelHelpers.classCallCheck(this, Subscriber);\n\n        this.channel = channel;\n        this.noticeHandler = noticeHandler;\n        this.cursor = -1;\n    }\n\n    babelHelpers.createClass(Subscriber, [{\n        key: 'notify',\n        value: function notify() {\n            var events = this.channel.poll(this.cursor);\n            this.cursor = channel.cursor;\n            if (events.length > 0) {\n                for (var i = 0; i < events.length; i++) {\n                    this._notifyEvent(events[i]);\n                }\n            }\n        }\n    }, {\n        key: '_notifyEvent',\n        value: function () {\n            var _ref = babelHelpers.asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(event) {\n                return regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                        switch (_context.prev = _context.next) {\n                            case 0:\n                                try {\n                                    this.noticeHandler(event);\n                                } catch (e) {\n                                    logger.error('notify event error', e, event, this.noticeHandler);\n                                }\n\n                            case 1:\n                            case 'end':\n                                return _context.stop();\n                        }\n                    }\n                }, _callee, this);\n            }));\n\n            function _notifyEvent(_x) {\n                return _ref.apply(this, arguments);\n            }\n\n            return _notifyEvent;\n        }()\n    }]);\n    return Subscriber;\n}();\n\nexport default Subscriber;","import JS from '../JS';\nimport Logger from '../logger';\n\nimport Subscriber from './Subscriber';\n\nvar logger = new Logger('Channel');\n\nvar default_options = {\n    bufferSize: 128\n};\n\nvar Channel = function () {\n    function Channel(name, options) {\n        babelHelpers.classCallCheck(this, Channel);\n\n        this.name = name;\n        this.events = [];\n        this.subscribers = [];\n        this.cursor = -1;\n\n        this._options = Object.assign({}, default_options, options);\n    }\n\n    babelHelpers.createClass(Channel, [{\n        key: 'subscribe',\n        value: function subscribe(noticeHandler) {\n            var found = this.subscribers.filter(function (subscriber) {\n                return subscriber.noticeHandler === noticeHandler;\n            });\n            if (found.length > 0) {\n                logger.debug('duplicated subscription on channel ' + this.name, noticeHandler);\n                return;\n            }\n\n            var subscriber = new Subscriber(this, noticeHandler);\n            this.subscribers.push(subscriber);\n            subscriber.notify();\n        }\n    }, {\n        key: 'unsubscribe',\n        value: function unsubscribe(noticeHandler) {\n            this.subscribers = this.subscribers.filter(function (subscriber) {\n                return subscriber.noticeHandler !== noticeHandler;\n            });\n        }\n    }, {\n        key: 'send',\n        value: function send(event) {\n            if (!event) {\n                logger.warn('nothing to send to channel ' + this.name);\n            }\n\n            var size = this._options.bufferSize;\n            this.cursor++;\n            var idx = this.cursor % size;\n            if (idx < this.events.length) {\n                this.events[idx] = event;\n            } else {\n                this.events.push(event);\n            }\n\n            this.subscribers.forEach(function (subscriber) {\n                return subscriber.notify();\n            });\n        }\n    }, {\n        key: 'poll',\n        value: function poll(last_cursor) {\n            if (JS.isUndefined(lastCursor)) {\n                last_cursor = -1;\n            }\n            if (last_cursor === this.cursor) {\n                return [];\n            }\n\n            var list = [];\n            var size = this._options.bufferSize;\n            for (var i = last_cursor + 1; i <= this.cursor; i++) {\n                var idx = i % size;\n                if (idx >= this.events.length) {\n                    logger.error('idx overflow');\n                    break;\n                }\n                list.push(this.events[idx]);\n            }\n\n            return list;\n        }\n    }]);\n    return Channel;\n}();\n\nexport default Channel;","import Logger from '../logger';\nimport Channel from './Channel';\n\nvar logger = new Logger('Pipe');\n\nvar default_options = {\n    bufferSize: 128\n};\n\nvar CHANNEL_BROADCAST = '_broadcast_';\n\nvar Pipe = function () {\n    function Pipe(name, options) {\n        babelHelpers.classCallCheck(this, Pipe);\n\n        this.name = name;\n        this._options = Object.assign({}, default_options, options);\n\n        this._channels = {};\n    }\n\n    babelHelpers.createClass(Pipe, [{\n        key: 'send',\n        value: function send(event, channel_name) {\n            if (!channel_name) {\n                channel_name = event.channel;\n            }\n            if (!channel_name) {\n                channel_name = CHANNEL_BROADCAST;\n            }\n            var channel = this._getChannel(channel_name);\n\n            channel.send(event);\n        }\n    }, {\n        key: 'subscribe',\n        value: function subscribe(noticeHandler, channel_name) {\n            if (!channel_name) {\n                channel_name = CHANNEL_BROADCAST;\n            }\n            var channel = this._getChannel(channel_name);\n\n            channel.subscribe(noticeHandler);\n        }\n    }, {\n        key: '_getChannel',\n        value: function _getChannel(name) {\n            if (!name) {\n                return null;\n            }\n            var channel = this._channels[name];\n            if (!channel) {\n                channel = new Channel(name);\n                this.channels[name] = channel;\n            }\n            return channel;\n        }\n    }]);\n    return Pipe;\n}();\n\nexport default Pipe;","import Pipe from './Pipe';\n\nvar pipe = new Pipe('_root_');\n\nexport default pipe;\n\nexport { Pipe };","var Url = function () {\n    function Url() {\n        babelHelpers.classCallCheck(this, Url);\n    }\n\n    babelHelpers.createClass(Url, null, [{\n        key: 'params',\n        value: function params(url) {\n            var parts = url.split('?');\n            if (parts.length < 2) {\n                return {};\n            }\n\n            parts = parts[1].split('#')[0].split('&');\n            var obj = {};\n            parts.forEach(function (part) {\n                var n_v = part.split('=');\n                var name = n_v[0];\n                var value = n_v.length > 1 ? n_v.slice(1).join('') : '';\n                obj[name] = decodeURIComponent(value);\n            });\n\n            return obj;\n        }\n    }]);\n    return Url;\n}();\n\nexport default Url;"],"names":["JS","classCallCheck","createClass","isString","val","padNumber","n","length","cur","remain","Math","floor","s","i","lessProps","props","less","p","Object","assign","list","concat","forEach","prop","regex","RegExp","keys","map","key","match","hasProps","lookup","count","traverseProps","obj","callback","log","_traverseProps","path","babelHelpers","typeof","isArray","sureArray","ary","appendUnique","exists","filter","item","push","ts","Date","getTime","isUndefined","undefinedThen","defVal","LOG_LEVELS","ConsoleLogger","name","level","arguments","undefined","_ts","dt","getMinutes","getSeconds","join","getMilliseconds","_key","type","msg","parts","_log","level_name","LOG_LEVEL","window","logger_level","type_level","console","error","warn","_len","Array","_key2","output","slice","_output","_key3","_output2","_key4","_len2","_key5","apply","info","_len3","_key6","_len4","_key7","_len5","_key8","debug","_len6","_key9","verbose","_len7","_key10","Logger","Device","hasWindow","createScript","src","async","onload","script","document","createElement","body","appendChild","logger","defaultOptions","LocalStorage","options","_options","prefix","set","value","worn","JSON","stringify","_setItem","get","_getItem","_isExpired","parse","data","remove","_removeItem","clear","store","localStorage","removeItem","purgeExpired","getItem","setItem","it","localStorge","expiration","MemoryStorage","_store","_this","_instance","default_options","Google","google_client_id","signIn","bind","signOut","check","ready","_initGapi","_user","_ga","_createScript","Promise","reject","then","googleUser","_this2","resolve","currentUser","isSignedIn","that","checkCount","checkGA","gapi","setTimeout","_googleUser$getAuthRe","getAuthResponse","id_token","profile","getBasicProfile","getEmail","getName","scope","g","load","auth2","init","ga","Facebook","facebook_app_id","_fbAsyncInit","_fb","fb","authResponse","catch","err","login","response","logout","getLoginStatus","status","checkFB","FB","accessToken","userID","api","user","fbAsyncInit","LinkedIn","api_key","_initIn","_fullyLoaded","_IN","_INLoaded","IN","User","authorize","isAuthorized","checkIN","API","Raw","result","firstName","lastName","id","headline","_in_onload","SSO","Subscriber","channel","noticeHandler","cursor","notify","events","poll","_notifyEvent","_ref","asyncToGenerator","regeneratorRuntime","mark","_callee","event","wrap","_callee$","_context","prev","next","e","stop","_x","Channel","subscribers","subscribe","found","subscriber","unsubscribe","send","size","bufferSize","idx","last_cursor","lastCursor","CHANNEL_BROADCAST","Pipe","_channels","channel_name","_getChannel","channels","pipe","Url","params","url","split","part","n_v","decodeURIComponent"],"mappings":"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"}