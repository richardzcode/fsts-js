{"version":3,"file":"fsts.js","sources":["../lib/JS.js","../lib/logger/ConsoleLogger.js","../lib/Device.js","../lib/cache/LocalStorage.js","../lib/cache/MemoryStorage.js","../lib/cache/index.js","../lib/Url.js"],"sourcesContent":["var JS = function () {\n    function JS() {\n        babelHelpers.classCallCheck(this, JS);\n    }\n\n    babelHelpers.createClass(JS, null, [{\n        key: 'isString',\n\n        // String\n        value: function isString(val) {\n            return typeof val === 'string';\n        }\n    }, {\n        key: 'padNumber',\n        value: function padNumber(n, length) {\n            if (n < 0) {\n                return '-' + JS.padNumber(-n, length - 1);\n            }\n\n            var cur = n % 10;\n            var remain = Math.floor(n / 10);\n            var s = '' + cur;\n            for (var i = 1; i < length; i++) {\n                if (remain === 0) {\n                    s = '0' + s;\n                } else {\n                    cur = remain % 10;\n                    remain = Math.floor(remain / 10);\n                    s = '' + cur + s;\n                }\n            }\n\n            return s;\n        }\n\n        // Object\n\n    }, {\n        key: 'lessProps',\n        value: function lessProps(props, less) {\n            var p = Object.assign({}, props);\n            if (!less) {\n                return p;\n            }\n\n            var list = [].concat(less);\n            list.forEach(function (prop) {\n                if (typeof prop === 'string') {\n                    var regex = new RegExp('^' + prop + '$');\n                    Object.keys(props).map(function (key) {\n                        if (key.match(regex)) {\n                            delete p[key];\n                        }\n                    });\n                }\n            });\n\n            return p;\n        }\n    }, {\n        key: 'hasProps',\n        value: function hasProps(props, lookup) {\n            if (!lookup) {\n                return 0;\n            }\n\n            var count = 0;\n            var list = [].concat(lookup);\n            list.forEach(function (prop) {\n                if (typeof prop === 'string') {\n                    var regex = new RegExp('^' + prop + '$');\n                    Object.keys(props).map(function (key) {\n                        if (key.match(regex)) {\n                            count++;\n                        }\n                    });\n                }\n            });\n\n            return count;\n        }\n    }, {\n        key: 'traverseProps',\n        value: function traverseProps(obj, callback) {\n            if (!callback) {\n                console.log('no callback for traverse, do nothing');\n                return;\n            }\n\n            JS._traverseProps([], obj, callback);\n        }\n    }, {\n        key: '_traverseProps',\n        value: function _traverseProps(path, obj, callback) {\n            if ((typeof obj === 'undefined' ? 'undefined' : babelHelpers.typeof(obj)) !== 'object') {\n                return;\n            }\n\n            Object.keys(obj).forEach(function (key) {\n                var val = obj[key];\n                callback(path, key, val);\n                JS._traverseProps(path.concat(key), val, callback);\n            });\n        }\n\n        // Array\n\n    }, {\n        key: 'isArray',\n        value: function isArray(val) {\n            if ((typeof val === 'undefined' ? 'undefined' : babelHelpers.typeof(val)) !== 'object') {\n                return false;\n            }\n\n            return typeof val.length === 'number';\n        }\n    }, {\n        key: 'sureArray',\n        value: function sureArray(ary) {\n            return [].concat(ary);\n        }\n    }, {\n        key: 'appendUnique',\n        value: function appendUnique(ary, val) {\n            if (!ary) {\n                return false;\n            }\n\n            var exists = ary.filter(function (item) {\n                return item === val;\n            });\n            if (exists.length > 0) {\n                return false;\n            }\n\n            ary.push(val);\n            return true;\n        }\n\n        // Date Time\n\n    }, {\n        key: 'ts',\n        value: function ts() {\n            return new Date().getTime();\n        }\n\n        // General\n\n    }, {\n        key: 'isUndefined',\n        value: function isUndefined(val) {\n            return typeof val === 'undefined';\n        }\n    }, {\n        key: 'undefinedThen',\n        value: function undefinedThen(val, defVal) {\n            return JS.isUndefined(val) ? defVal : val;\n        }\n    }]);\n    return JS;\n}();\n\nexport default JS;","import JS from '../JS';\n\nvar LOG_LEVELS = {\n    VERBOSE: 1,\n    DEBUG: 2,\n    INFO: 3,\n    WARN: 4,\n    ERROR: 5\n};\n\nvar ConsoleLogger = function () {\n    function ConsoleLogger(name) {\n        var level = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'WARN';\n        babelHelpers.classCallCheck(this, ConsoleLogger);\n\n        this.name = name;\n        this.level = level;\n    }\n\n    babelHelpers.createClass(ConsoleLogger, [{\n        key: '_ts',\n        value: function _ts() {\n            var dt = new Date();\n            return [JS.padNumber(dt.getMinutes(), 2), JS.padNumber(dt.getSeconds(), 2)].join(':') + '.' + dt.getMilliseconds();\n        }\n    }, {\n        key: '_key',\n        value: function _key(type, msg) {\n            var parts = ['[' + type + ']', this._ts(), this.name];\n\n            if (msg) {\n                parts = parts.concat(['-', msg]);\n            }\n\n            return parts.join(' ');\n        }\n    }, {\n        key: '_log',\n        value: function _log(type) {\n            var level_name = this.level;\n            if (ConsoleLogger.LOG_LEVEL) {\n                level_name = ConsoleLogger.LOG_LEVEL;\n            }\n            if (typeof window != 'undefined' && window.LOG_LEVEL) {\n                level_name = window.LOG_LEVEL;\n            }\n            var logger_level = LOG_LEVELS[level_name];\n            var type_level = LOG_LEVELS[type];\n            if (!(type_level >= logger_level)) {\n                return;\n            }\n\n            var log = console.log;\n            if (type === 'ERROR' && console.error) {\n                log = console.error;\n            }\n            if (type === 'WARN' && console.warn) {\n                log = console.warn;\n            }\n\n            for (var _len = arguments.length, msg = Array(_len > 1 ? _len - 1 : 0), _key2 = 1; _key2 < _len; _key2++) {\n                msg[_key2 - 1] = arguments[_key2];\n            }\n\n            if (msg.length === 1 && typeof msg[0] === 'string') {\n                log(this._key(type, msg[0]));\n            } else if (msg.length === 1) {\n                var output = {};\n                var key = this._key(type);\n                output[key] = msg[0];\n                log(output);\n            } else if (typeof msg[0] === 'string') {\n                var obj = msg.slice(1);\n                if (obj.length === 1) {\n                    obj = obj[0];\n                }\n                var _output = {};\n                var _key3 = this._key(type, msg[0]);\n                _output[_key3] = obj;\n                log(_output);\n            } else {\n                var _output2 = {};\n                var _key4 = this._key(type);\n                _output2[_key4] = msg;\n                log(_output2);\n            }\n        }\n    }, {\n        key: 'log',\n        value: function log() {\n            for (var _len2 = arguments.length, msg = Array(_len2), _key5 = 0; _key5 < _len2; _key5++) {\n                msg[_key5] = arguments[_key5];\n            }\n\n            this._log.apply(this, ['INFO'].concat(msg));\n        }\n    }, {\n        key: 'info',\n        value: function info() {\n            for (var _len3 = arguments.length, msg = Array(_len3), _key6 = 0; _key6 < _len3; _key6++) {\n                msg[_key6] = arguments[_key6];\n            }\n\n            this._log.apply(this, ['INFO'].concat(msg));\n        }\n    }, {\n        key: 'warn',\n        value: function warn() {\n            for (var _len4 = arguments.length, msg = Array(_len4), _key7 = 0; _key7 < _len4; _key7++) {\n                msg[_key7] = arguments[_key7];\n            }\n\n            this._log.apply(this, ['WARN'].concat(msg));\n        }\n    }, {\n        key: 'error',\n        value: function error() {\n            for (var _len5 = arguments.length, msg = Array(_len5), _key8 = 0; _key8 < _len5; _key8++) {\n                msg[_key8] = arguments[_key8];\n            }\n\n            this._log.apply(this, ['ERROR'].concat(msg));\n        }\n    }, {\n        key: 'debug',\n        value: function debug() {\n            for (var _len6 = arguments.length, msg = Array(_len6), _key9 = 0; _key9 < _len6; _key9++) {\n                msg[_key9] = arguments[_key9];\n            }\n\n            this._log.apply(this, ['DEBUG'].concat(msg));\n        }\n    }, {\n        key: 'verbose',\n        value: function verbose() {\n            for (var _len7 = arguments.length, msg = Array(_len7), _key10 = 0; _key10 < _len7; _key10++) {\n                msg[_key10] = arguments[_key10];\n            }\n\n            this._log.apply(this, ['VERBOSE'].concat(msg));\n        }\n    }]);\n    return ConsoleLogger;\n}();\n\nexport default ConsoleLogger;\n;","var Device = function () {\n    function Device() {\n        babelHelpers.classCallCheck(this, Device);\n    }\n\n    babelHelpers.createClass(Device, null, [{\n        key: 'hasWindow',\n        value: function hasWindow() {\n            return typeof window !== 'undefined';\n        }\n    }]);\n    return Device;\n}();\n\nexport default Device;","import JS from '../JS';\nimport ConsoleLogger from '../logger/ConsoleLogger';\n\nvar logger = new ConsoleLogger('LocalStorage');\n\nvar defaultOptions = {\n    prefix: '_fsts_',\n    expiration: '3600' // seconds\n};\n\nvar LocalStorage = function () {\n    function LocalStorage(options) {\n        babelHelpers.classCallCheck(this, LocalStorage);\n\n        logger.debug('creating LocalStorage instance', options);\n\n        this._options = Object.assign({}, defaultOptions, options);\n    }\n\n    babelHelpers.createClass(LocalStorage, [{\n        key: 'options',\n        value: function options(_options) {\n            if (_options) {\n                this._options = Object.assign({}, this._options, _options);\n            }\n\n            return this._options;\n        }\n    }, {\n        key: 'key',\n        value: function key(_key) {\n            return this._options.prefix + _key;\n        }\n    }, {\n        key: 'set',\n        value: function set(key, value) {\n            if (!key) {\n                logger.warn('no key to set');\n                return;\n            }\n            if (JS.isUndefined(value) || value === null) {\n                logger.worn('nothing to set for ' + key);\n                return;\n            }\n\n            var item = {\n                data: JSON.stringify(value),\n                ts: JS.ts()\n            };\n\n            this._setItem(key, item);\n        }\n    }, {\n        key: 'get',\n        value: function get(key) {\n            if (!key) {\n                logger.warn('no key to get');\n                return;\n            }\n\n            var item = this._getItem(key);\n            if (!item) {\n                logger.verbose('cache miss: ' + key);\n                return null;\n            }\n\n            if (this._isExpired(item)) {\n                logger.verbose('cache miss: ' + key);\n                return null;\n            }\n\n            logger.verbose('cache hit: ' + key);\n            return JSON.parse(item.data);\n        }\n    }, {\n        key: 'remove',\n        value: function remove(key) {\n            if (!key) {\n                logger.warn('no key to remove');\n                return;\n            }\n\n            this._removeItem(key);\n        }\n    }, {\n        key: 'clear',\n        value: function clear() {\n            var store = window.localStorage;\n            while (store.length > 0) {\n                var key = store.key(0);\n                store.removeItem(key);\n            }\n        }\n    }, {\n        key: 'purgeExpired',\n        value: function purgeExpired() {\n            var store = window.localStorage;\n            while (store.length > 0) {\n                var key = store.key(0);\n                var item = JSON.parse(store.getItem(key));\n                if (this._isExpired(item)) {\n                    store.removeItem(key);\n                }\n            }\n        }\n    }, {\n        key: '_setItem',\n        value: function _setItem(key, item) {\n            window.localStorage.setItem(this.key(key), JSON.stringify(item));\n        }\n    }, {\n        key: '_getItem',\n        value: function _getItem(key) {\n            var item = window.localStorage.getItem(this.key(key));\n            if (!item) {\n                return null;\n            }\n\n            var it = JSON.parse(item);\n            return {\n                data: it.data,\n                ts: it.ts * 1\n            };\n        }\n    }, {\n        key: '_removeItem',\n        value: function _removeItem(key) {\n            window.localStorge.removeItem(this.key(key));\n        }\n    }, {\n        key: '_isExpired',\n        value: function _isExpired(item) {\n            var cur = JS.ts();\n            return item.ts + this._options.expiration * 1000 < cur;\n        }\n    }]);\n    return LocalStorage;\n}();\n\nexport default LocalStorage;","import JS from '../JS';\nimport ConsoleLogger from '../logger/ConsoleLogger';\n\nvar logger = new ConsoleLogger('MemoryStorage');\n\nvar defaultOptions = {\n    expiration: '3600' // seconds\n\n\n    /**\n    * MemoryStorage as an alternative to LocalStorage. Items will not live beyond session.\n    * Still do JSON stringify so consistant with LocalStorage, also ensures immutable in cache.\n    */\n};\nvar MemoryStorage = function () {\n    function MemoryStorage(options) {\n        babelHelpers.classCallCheck(this, MemoryStorage);\n\n        logger.debug('creating MemoryStorage instance', options);\n\n        this._options = Object.assign({}, defaultOptions, options);\n\n        this._store = {};\n    }\n\n    babelHelpers.createClass(MemoryStorage, [{\n        key: 'options',\n        value: function options(_options) {\n            if (_options) {\n                this._options = Object.assign({}, this._options, _options);\n            }\n\n            return this._options;\n        }\n    }, {\n        key: 'set',\n        value: function set(key, value) {\n            if (!key) {\n                logger.warn('no key to set');\n                return;\n            }\n            if (JS.isUndefined(value) || value === null) {\n                logger.worn('nothing to set for ' + key);\n                return;\n            }\n\n            var item = {\n                data: JSON.stringify(value),\n                ts: JS.ts()\n            };\n\n            this._store[key] = item;\n        }\n    }, {\n        key: 'get',\n        value: function get(key) {\n            if (!key) {\n                logger.warn('no key to get');\n                return;\n            }\n\n            var item = this._store[key];\n            if (!item) {\n                logger.verbose('cache miss: ' + key);\n                return null;\n            }\n\n            if (this._isExpired(item)) {\n                logger.verbose('cache miss: ' + key);\n                return null;\n            }\n\n            logger.verbose('cache hit: ' + key);\n            return JSON.parse(item.data);\n        }\n    }, {\n        key: 'remove',\n        value: function remove(key) {\n            if (!key) {\n                logger.warn('no key to remove');\n                return;\n            }\n\n            delete this._store[key];\n        }\n    }, {\n        key: 'clear',\n        value: function clear() {\n            this._store = {};\n        }\n    }, {\n        key: 'purgeExpired',\n        value: function purgeExpired() {\n            var _this = this;\n\n            Object.keys(this._store).forEach(function (key) {\n                var item = _this._store[key];\n                if (_this._isExpired(item)) {\n                    delete _this._store[key];\n                }\n            });\n        }\n    }, {\n        key: '_isExpired',\n        value: function _isExpired(item) {\n            var cur = JS.ts();\n            return item.ts + this._options.expiration * 1000 < cur;\n        }\n    }]);\n    return MemoryStorage;\n}();\n\nexport default MemoryStorage;","import Device from '../Device';\n\nimport { default as LocalStorage } from './LocalStorage';\nimport { default as MemoryStorage } from './MemoryStorage';\n\nvar _instance = Device.hasWindow() ? new LocalStorage() : new MemoryStorage();\n\nexport default _instance;\n\nexport { LocalStorage, MemoryStorage };","var Url = function () {\n    function Url() {\n        babelHelpers.classCallCheck(this, Url);\n    }\n\n    babelHelpers.createClass(Url, null, [{\n        key: 'params',\n        value: function params(url) {\n            var parts = url.split('?');\n            if (parts.length < 2) {\n                return {};\n            }\n\n            parts = parts[1].split('#')[0].split('&');\n            var obj = {};\n            parts.forEach(function (part) {\n                var n_v = part.split('=');\n                var name = n_v[0];\n                var value = n_v.length > 1 ? n_v.slice(1).join('') : '';\n                obj[name] = decodeURIComponent(value);\n            });\n\n            return obj;\n        }\n    }]);\n    return Url;\n}();\n\nexport default Url;"],"names":["JS","classCallCheck","createClass","isString","val","padNumber","n","length","cur","remain","Math","floor","s","i","lessProps","props","less","p","Object","assign","list","concat","forEach","prop","regex","RegExp","keys","map","key","match","hasProps","lookup","count","traverseProps","obj","callback","log","_traverseProps","path","babelHelpers","typeof","isArray","sureArray","ary","appendUnique","exists","filter","item","push","ts","Date","getTime","isUndefined","undefinedThen","defVal","LOG_LEVELS","ConsoleLogger","name","level","arguments","undefined","_ts","dt","getMinutes","getSeconds","join","getMilliseconds","_key","type","msg","parts","_log","level_name","LOG_LEVEL","window","logger_level","type_level","console","error","warn","_len","Array","_key2","output","slice","_output","_key3","_output2","_key4","_len2","_key5","apply","info","_len3","_key6","_len4","_key7","_len5","_key8","debug","_len6","_key9","verbose","_len7","_key10","Device","hasWindow","logger","defaultOptions","LocalStorage","options","_options","prefix","set","value","worn","JSON","stringify","_setItem","get","_getItem","_isExpired","parse","data","remove","_removeItem","clear","store","localStorage","removeItem","purgeExpired","getItem","setItem","it","localStorge","expiration","MemoryStorage","_store","_this","_instance","Url","params","url","split","part","n_v","decodeURIComponent"],"mappings":"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"}