{"version":3,"file":"fsts.js","sources":["../src/JS.js","../src/logger/ConsoleLogger.js","../src/Device.js","../src/Url.js"],"sourcesContent":["export default class JS {\n    // String\n    static padNumber(n, length) {\n        let cur = n % 10;\n        let remain = Math.floor(n / 10);\n        let s = '' + cur;\n        for (var i = 1; i < length; i++) {\n            if (remain === 0) {\n                s = '0' + s;\n            } else {\n                cur = remain % 10;\n                remain = Math.floor(remain / 10);\n                s = '' + cur + s;\n            }\n        }\n\n        return s;\n    }\n\n    // Object\n    static lessProps(props, less) {\n        const p = Object.assign({}, props);\n        if (!less) { return p; }\n\n        const list = [].concat(less);\n        list.forEach(prop => {\n            if (typeof prop === 'string') {\n                const regex = new RegExp('^' + prop + '$');\n                Object.keys(props).map(key => {\n                    if (key.match(regex)) { delete p[key]; }\n                })\n            }\n        });\n\n        return p;\n    }\n\n    static hasProps(props, lookup) {\n        if (!lookup) { return 0; }\n\n        let count = 0;\n        const list = [].concat(lookup);\n        list.forEach(prop => {\n            if (typeof prop === 'string') {\n                const regex = new RegExp('^' + prop + '$');\n                Object.keys(props).map(key => {\n                    if (key.match(regex)) { count++; }\n                })\n            }\n        });\n\n        return count;\n    }\n\n    static traverseProps(obj, callback) {\n        if (!callback) {\n            console.log('no callback for traverse, do nothing');\n            return;\n        }\n\n        JS._traverseProps([], obj, callback);\n    }\n\n    static _traverseProps(path, obj, callback) {\n        if (typeof obj !== 'object') { return; }\n\n        Object.keys(obj).forEach(key => {\n            const val = obj[key];\n            callback(path, key, val);\n            JS._traverseProps(path.concat(key), val, callback);\n        });\n    }\n\n    // Array\n    static isArray(val) {\n        if (typeof val !== 'object') { return false; }\n\n        return (typeof val.length === 'number');\n    }\n\n    static sureArray(ary) {\n        return [].concat(ary);\n    }\n\n    static appendUnique(ary, val) {\n        if (!ary) { return false; }\n\n        const exists = ary.filter(item => item === val);\n        if (exists.length > 0) { return false; }\n\n        ary.push(val);\n        return true;\n    }\n\n    // General\n    static undefinedThen(val, defVal) {\n        return (typeof val === 'undefined')? defVal : val;\n    }\n}\n","import JS from '../JS';\n\nconst LOG_LEVELS = {\n    VERBOSE: 1,\n    DEBUG: 2,\n    INFO: 3,\n    WARN: 4,\n    ERROR: 5\n};\n\nexport default class ConsoleLogger {\n    constructor(name, level = 'WARN') {\n        this.name = name;\n        this.level = level;\n    }\n\n    _ts() {\n        const dt = new Date();\n        return [\n            JS.padNumber(dt.getMinutes(), 2),\n            JS.padNumber(dt.getSeconds(), 2)\n        ].join(':') + '.' + dt.getMilliseconds();\n    }\n\n    _key(type, msg) {\n        let parts = [\n            '[' + type + ']',\n            this._ts(),\n            this.name,\n        ];\n\n        if (msg) { parts = parts.concat(['-', msg]); }\n\n        return parts.join(' ');\n    }\n\n    _log(type, ...msg) {\n        let level_name = this.level;\n        if (ConsoleLogger.LOG_LEVEL) { level_name = ConsoleLogger.LOG_LEVEL; }\n        if ((typeof window != 'undefined') && window.LOG_LEVEL) {\n            level_name = window.LOG_LEVEL;\n        }\n        const logger_level = LOG_LEVELS[level_name];\n        const type_level = LOG_LEVELS[type];\n        if (!(type_level >= logger_level)) {\n            return;\n        }\n\n        let log = console.log;\n        if (type === 'ERROR' && console.error) { log = console.error; }\n        if (type === 'WARN' && console.warn) { log = console.warn; }\n\n        if (msg.length === 1 && typeof msg[0] === 'string') {\n            log(this._key(type, msg[0]));\n        } else if (msg.length === 1) {\n            const output = {};\n            const key = this._key(type);\n            output[key] = msg[0];\n            log(output);\n        } else if (typeof msg[0] === 'string') {\n            let obj = msg.slice(1);\n            if (obj.length === 1) { obj = obj[0]; }\n            const output = {};\n            const key = this._key(type, msg[0]);\n            output[key] = obj;\n            log(output);\n        } else {\n            const output = {};\n            const key = this._key(type);\n            output[key] = msg;\n            log(output);\n        }\n    }\n\n    log(...msg) { this._log('INFO', ...msg); }\n    info(...msg) { this._log('INFO', ...msg); }\n    warn(...msg) { this._log('WARN', ...msg); }\n    error(...msg) { this._log('ERROR', ...msg); }\n    debug(...msg) { this._log('DEBUG', ...msg); }\n    verbose(...msg) { this._log('VERBOSE', ...msg); }\n};\n\n","export default class Device {\n    static hasWindow() {\n        return (typeof window !== 'undefined');\n    }\n}\n","export default class Url {\n    static params(url) {\n        let parts = url.split('?');\n        if (parts.length < 2) { return {}; }\n\n        parts = parts[1].split('#')[0].split('&');\n        let obj = {};\n        parts.forEach(part => {\n            const n_v = part.split('=');\n            const name = n_v[0];\n            const value = n_v.length > 1? n_v.slice(1).join('') : '';\n            obj[name] = decodeURIComponent(value);\n        });\n\n        return obj;\n    }\n}\n"],"names":["JS","n","length","cur","remain","Math","floor","s","i","props","less","p","Object","assign","list","concat","forEach","prop","regex","RegExp","keys","map","key","match","lookup","count","obj","callback","log","_traverseProps","path","val","ary","exists","filter","item","push","defVal","LOG_LEVELS","ConsoleLogger","name","level","dt","Date","padNumber","getMinutes","getSeconds","join","getMilliseconds","type","msg","parts","_ts","level_name","LOG_LEVEL","window","logger_level","type_level","console","error","warn","_key","output","slice","_log","Device","Url","url","split","n_v","part","value","decodeURIComponent"],"mappings":"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"}